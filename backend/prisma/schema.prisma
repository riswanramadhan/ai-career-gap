// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql" // Pastikan ini postgresql
  url      = env("DATABASE_URL")
}

model Analysis {
  id        String   @id @default(uuid())
  createdAt DateTime @default(now())

  // HASHING (Kunci Jawaban Soal "Caching")
  // Kita tidak simpan text panjang utk search, tapi hash-nya.
  resumeHash       String
  jobDescHash      String

  // HASIL AI (Disimpan sebagai JSON biar rapi)
  missingSkills      Json
  learningSteps      Json
  interviewQuestions Json

  // Constraint unik: Gabungan resume+jobdesc tidak boleh duplikat
  @@unique([resumeHash, jobDescHash])
}